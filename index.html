<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ShowTails Evans Importer</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
      background: #f9f9f9;
    }
    #wrapper {
      position: relative;
    }
    textarea {
      width: 100%;
      height: 60vh;
      font-family: monospace;
      font-size: 12px;
      padding: 10px;
      white-space: pre; /* Preserve spacing exactly */
    }
    #copyBtn {
      position: absolute;
      top: -50px;
      right: 0;
      padding: 8px 14px;
      background: #ffd700;
      border: 2px solid #333;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <h2>ShowTails – Evans Importer</h2>
  <p>Copy the full text below.</p>

  <div id="wrapper">
    <button id="copyBtn" onclick="copyAll()">Copy All</button>
    <textarea id="output" readonly></textarea>
  </div>

  <p>✅ Once copied, paste it in the “Evan's Raw HTML Text” field.</p>

<script>
  async function run() {
    const urlParams = new URLSearchParams(window.location.search);
    const file = urlParams.get("file");

    if (!file) {
      document.getElementById("output").value =
        "❌ No file parameter found. Example:\n\n?file=https://yourdomain.com/yourfile.htm";
      return;
    }

    try {
      const res = await fetch(file);
      const text = await res.text();

      // No escaping — show EXACT HTML
      document.getElementById("output").value = text;

    } catch (err) {
      document.getElementById("output").value =
        "❌ Error fetching file:\n" + err;
    }
  }

  function copyAll() {
    const text = document.getElementById("output").value;

    navigator.clipboard.writeText(text)
      .then(() => alert("Full HTML copied to clipboard!"))
      .catch(() => alert("Unable to copy."));
  }

  run();
</script>

</body>
</html>
